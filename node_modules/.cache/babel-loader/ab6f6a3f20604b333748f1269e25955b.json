{"ast":null,"code":"import _regeneratorRuntime from\"D:/june28/github upload/boomyshow/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"D:/june28/github upload/boomyshow/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:/june28/github upload/boomyshow/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/june28/github upload/boomyshow/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import{GetUserByEmail,GetMovieById,PostTicket,UpdateSeats}from\"./api\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Cart(props){var x=props.match.params.id.split(\"+\");console.log(x[0]);console.log(x[1]);var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setuserData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),movieData=_useState4[0],setmovieData=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),seats=_useState6[0],setSeats=_useState6[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return GetUserByEmail(x[1]);case 2:users=_context.sent;setuserData.apply(void 0,_toConsumableArray(userData).concat([users.data]));console.log(\"Mounted\");case 5:case\"end\":return _context.stop();}}},_callee);})),[]);console.log(userData);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var users;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return GetMovieById(x[0]);case 2:users=_context2.sent;setmovieData.apply(void 0,_toConsumableArray(movieData).concat([users.data]));console.log(\"Mounted\");case 5:case\"end\":return _context2.stop();}}},_callee2);})),[]);var ticket={username:userData.username,moviename:movieData.moviename,time:movieData.time,date:movieData.date,totalseats:seats,total:movieData.fair*seats,place:movieData.place,theater:movieData.theater};console.log(movieData);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center h-100\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card1\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[userData.username,\" Cart\"]})}),/*#__PURE__*/_jsx(\"div\",{class:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.next=3;return PostTicket(ticket);case 3:setSeats(\"\");_context3.next=6;return UpdateSeats(x[0],{seats:movieData.seats-seats});case 6:history.push(\"/usertickets/\".concat(userData.username));case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-group text-light \",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Movie Name : \",movieData.moviename]})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group text-light \",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Movie Time : \",movieData.time]})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group text-light \",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Movie Date : \",movieData.date]})}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group form-group\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-sort-numeric-up\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"Number\",class:\"form-control\",placeholder:\"No of seats\",required:true,min:\"1\",value:seats,onChange:function onChange(e){setSeats(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group text-light \",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total = rs \",movieData.fair*seats]})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Buy\",class:\"btn float-right btn-danger\"})})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"card-footer\"})]})})})});}export default Cart;","map":{"version":3,"names":["React","useEffect","useState","useHistory","GetUserByEmail","GetMovieById","PostTicket","UpdateSeats","Cart","props","x","match","params","id","split","console","log","history","userData","setuserData","movieData","setmovieData","seats","setSeats","users","data","ticket","username","moviename","time","date","totalseats","total","fair","place","theater","e","preventDefault","push","target","value"],"sources":["D:/june28/github upload/boomyshow/frontend/src/cart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { GetUserByEmail ,GetMovieById,PostTicket, UpdateSeats} from \"./api\";\n\nfunction Cart(props){\n\n    let x=props.match.params.id.split(\"+\");\n    console.log(x[0])\n    console.log(x[1])\n    let history = useHistory();\n\n    let [userData, setuserData] = useState([])\n    let [movieData,setmovieData]=useState([])\n    let [seats,setSeats]=useState(\"\");\n\n    useEffect(async () => {\n        let users = await GetUserByEmail(x[1]);\n        setuserData(...userData, users.data)\n        console.log(\"Mounted\")\n    }, [])\n\n    console.log(userData)\n\n\n    useEffect(async () => {\n        let users = await GetMovieById(x[0]);\n        setmovieData(...movieData, users.data)\n        console.log(\"Mounted\")\n    }, [])\n    \n    let ticket={\n        username:userData.username,\n        moviename: movieData.moviename,\n        time:movieData.time,\n        date:movieData.date,\n        totalseats:seats,\n        total:movieData.fair*seats,\n        place:movieData.place,\n        theater:movieData.theater\n    }\n    console.log(movieData)\n\n    return(\n        <>\n        <div class=\"container mt-5\">\n                <div class=\"d-flex justify-content-center h-100\">\n                    <div class=\"card1\">\n                        <div class=\"card-header\">\n                            <h3>{userData.username} Cart</h3>\n                        </div>\n                        <div class=\"card-body\">\n                            <form onSubmit={async (e) => {\n                                e.preventDefault();\n                                await PostTicket(ticket);\n                                setSeats(\"\");\n                                await UpdateSeats(x[0],{seats:(movieData.seats-seats)})\n                                history.push(`/usertickets/${userData.username}`)\n                            }}>\n                            \n\n                                <div class=\"form-group text-light \">\n                                   <h4>Movie Name : {movieData.moviename}</h4>\n                                </div>\n\n                                <div class=\"form-group text-light \">\n                                   <h4>Movie Time : {movieData.time}</h4>\n                                </div>\n\n                                <div class=\"form-group text-light \">\n                                   <h4>Movie Date : {movieData.date}</h4>\n                                </div>\n                                \n                                <div class=\"input-group form-group\">\n                                    <div class=\"input-group-prepend\">\n                                        <span class=\"input-group-text\"><i class=\"fas fa-sort-numeric-up\"></i></span>\n                                    </div>\n                                    <input type=\"Number\" class=\"form-control\" placeholder=\"No of seats\" required min=\"1\" value={seats} onChange={(e) => {\n                                        setSeats(e.target.value);\n                                    }}  />\n                                </div>\n                                <div class=\"form-group text-light \">\n                                   <h4>Total = rs {movieData.fair*seats}</h4>\n                                </div>\n                                <div class=\"form-group\">\n                                    <input type=\"submit\" value=\"Buy\" class=\"btn float-right btn-danger\" />\n                                </div>\n                            </form>\n                        </div>\n                        <div class=\"card-footer\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}